{% extends "base.html" %}

{% load staticfiles %}
{% load i18n %}
{% load solo_tags %}
{% load translate_urls %}
{% load donation_wallets %}

{% block title %}
{% get_solo 'config.LandingConfiguration3' as conf3 %}
{{ conf3.title_lk }}
{% endblock %}

{% block content %}
{% get_current_language as LANGUAGE_CODE %}
{% get_solo 'config.LandingConfiguration' as conf %}
{% get_solo 'config.LandingConfiguration3' as conf3 %}
<div class="mobile-menu-wrap" id="mob-menu">
    <div class="mobile-top-line">
        <div class="lang-select-wrap">
            <ul class="lang-list">
                <li>
                    <a href="#!" class="curr-lang">{{ LANGUAGE_CODE }}
                        <span class="icon">
                            <img src="{% static 'img/lang-arrow.png' %}" alt="arrow-down">
                        </span>
                    </a>
                    <ul class="lang-dropdown">
                        {% if LANGUAGE_CODE != "en" %}
                            <li>
                                <a href="{% translate_url en %}">
                                    en
                                </a>
                            </li>
                        {% endif %}
                        {% if LANGUAGE_CODE != "ru" %}
                            <li>
                                <a href="{% translate_url ru %}">
                                    ru
                                </a>
                            </li>
                        {% endif %}
                    </ul>
                </li>
            </ul>
        </div>
        {% if request.user.is_authenticated %}
            <div class="mobile-menu-wrap__auth">
                <a href="{% url 'profile' %}" class="profile-link">
                    <p class="user-name">{% trans 'Profile' %}</p>
                </a>
                <a href="{% url 'logout' %}" class="exit">
                    <svg class="exit-img" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                        x="0px" y="0px" width="533.333px" height="533.333px" viewBox="0 0 533.333 533.333" style="enable-background:new 0 0 533.333 533.333;"
                        xml:space="preserve">
                        <g>
                            <path d="M416.667,333.333v-66.666H250V200h166.667v-66.667l100,100L416.667,333.333z M383.333,300v133.333H216.667v100l-200-100V0
                       h366.667v166.667H350V33.333H83.333L216.667,100v300H350V300H383.333z" />
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                    </svg>
                </a>
            </div>
        {% else %}
            <div class="mobile-menu-wrap__auth">
                <a href="#!" class="login" id="login-mb">{% trans 'Log in' %}</a>
                <a href="#!" class="signin" id="signin-mb">{% trans 'Sign up' %}</a>
            </div>
        {% endif %}
    </div>
    <nav class="mobile-menu-wrap__menu">
        {% for menu_item in menu %}
            <a href="{% if menu_item.link %}{% url 'landing' %}{{ menu_item.link }}{% else %}#!{% endif %}" class="link">{{ menu_item.name }}</a>
        {% endfor %}
    </nav>
</div>
<header class="header header--lk">
    <div class="container">
        <div class="content-relative">
            <div class="top-line">
                <a href="/{{ LANGUAGE_CODE }}/" class="logo">
                    <svg id="" data-name="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 324">

                        <path class="cls-1" d="M180,57.35v57.41s2.77-.79,3.66-1.08,5.48-1.6,6.34-1.93a11.43,11.43,0,0,0,7.64-7.67s.68-1.79,3.68-2.29a11.36,11.36,0,0,1,4.33.37c2.58.67,2.88.84,4.69.78a6.2,6.2,0,0,0,1.62-.53c1-.45,3.95-1.75,5.9-2.37a77.36,77.36,0,0,1,10.81-2.65c4.16-.62,7.81-1.1,11.45-1.41s6.21-.36,8.37.26a13.89,13.89,0,0,1,5.18,2.71c1.39,1.15.88,1.21,2.36,2a10.7,10.7,0,0,0,5.34,1.17c1.89,0,3.88-.13,5.47-.26s7.1-.6,9.2-.59,4.36,0,5.57.59,1.29,3.28,1.29,3.28a25.18,25.18,0,0,1-.29,4.81,44.21,44.21,0,0,1-1.13,5.1c-.4,1.26-1.25,4.29-3.07,6.12s-95.82,94.36-95.82,94.36a9.47,9.47,0,0,0-1.86,2.84,9.68,9.68,0,0,0-.66,3.68c0,1.34-.09,47.55-.09,47.55h166.7V223.24s-3.64.37-6,.76-11.5,2.27-12.48,2.47-5.78,1.15-8.2,1.38c-6,.56-6.75-1.55-8.25-3.73,0,0-2.26-3.27-4-5.4s-5-5.88-5.3-6.28-3.06-3.48-4.89-5.44a96.23,96.23,0,0,1-6.47-7.41c-1.55-2.14-2.86-4.16-4.36-5.11s-3.2-1.47-6.89-.11-11.37,4.54-18.49,7.75c0,0-4.54,2.15-8.44.67,0,0,8.32-5.85,9.71-7s8-7.21,10-8.64,6.64-4.8,11.53-5.34a19.24,19.24,0,0,1,3.68-.18s1.22-2,2.26-4a16,16,0,0,1,3.48-3.76l7.34-6.94,8.48-8.37,9.93-10s14.92-14.75,16.76-16.47,6.22-5.57,7.6-6.95c2.35-2.35,3-3.4,3-7.85V57.35Z"></path>
                        <path class="cls-1" d="M375.26,269.65V57.35h40.82s4.17.65,7.82,5.64l80,101.41V57.35h58v212.3l-39.62,0a12.54,12.54,0,0,1-6.68-1.83,8.52,8.52,0,0,1-2.45-2.21L432.89,166V269.65Z"
                        />
                        <path class="cls-1" d="M705.19,57.35H652.5L579,269.65h59.26L651,228.06h55.65l12.12,41.59h59.56Zm-45.59,131.4,18.64-62.43h1.18l17.81,62.43Z"
                        />
                        <path class="cls-1" d="M971.5,234.31A107.06,107.06,0,0,0,998,163.64c0-59.21-47.8-107.22-106.77-107.22s-106.77,48-106.77,107.22,47.8,107.22,106.77,107.22a106,106,0,0,0,48.69-11.78l4.4,4.76a18.07,18.07,0,0,0,13.27,5.81h46.58Zm-39-42.17-5.26-5.69a21.13,21.13,0,0,0-15.52-6.79H866.51l35.37,38.28a41.94,41.94,0,0,1-10.67,1.39c-26.56,0-48.09-24.93-48.09-55.69S864.65,108,891.21,108s48.09,24.93,48.09,55.69A62.17,62.17,0,0,1,932.53,192.14Z"
                        />
                    </svg>
                </a>
                <nav class="menu">
                    {% for menu_item in menu %}
                        <a href="{% if menu_item.link %}{% url 'landing' %}{{ menu_item.link }}{% else %}#!{% endif %}" class="link">{{ menu_item.name }}</a>
                    {% endfor %}
                </nav>
                <div class="lang-select-wrap page-lang {% if LANGUAGE_CODE == 'ru' %}lang-fix{% endif %}">
                    <ul class="lang-list">
                        <li>
                            <a href="#!" class="curr-lang">{{ LANGUAGE_CODE }}
                                <span class="icon">
                                    <img src="{% static 'img/lang-arrow.png' %}" alt="arrow-down">
                                </span>
                            </a>
                            <ul class="lang-dropdown">
                                {% if LANGUAGE_CODE != "en" %}
                                    <li>
                                        <a href="{% translate_url en %}">
                                            en
                                        </a>
                                    </li>
                                {% endif %}
                                {% if LANGUAGE_CODE != "ru" %}
                                    <li>
                                        <a href="{% translate_url ru %}">
                                            ru
                                        </a>
                                    </li>
                                {% endif %}
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="auth">
                  <a href="{% url 'logout' %}" class="logout" id="logout">{% trans 'Выйти' %}</a>
                  <a href="{% url 'landing' %}" class="home" id="home">{% trans 'На главную' %}
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px"
                      width="512px" height="512px" viewBox="0 0 220.682 220.682" style="enable-background:new 0 0 220.682 220.682;"
                      xml:space="preserve">
                      <g>
                        <polygon points="92.695,38.924 164.113,110.341 92.695,181.758 120.979,210.043 220.682,110.341 120.979,10.639  " />
                        <polygon points="28.284,210.043 127.986,110.341 28.284,10.639 0,38.924 71.417,110.341 0,181.758  " />
                      </g>
                    </svg>
                  </a>
                </div>
                <p class="mobile-icon" id="mob-mnu-open">
                        <svg height="32px" class="mob-menu-hamburger" id="Layer_1" style="enable-background:new 0 0 32 32;" version="1.1" viewBox="0 0 32 32" width="32px" xml:space="preserve"
                            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"
                            />
                        </svg>
                        <svg version="1.1" class="mob-menu-close" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="    0px"
                                width="40px" height="32px" viewBox="0 0 284.929 284.929" style="enable-background:new 0 0 284.929 284.929;"
                                xml:space="preserve">
                                <g>
                                    <path d="M282.082,76.511l-14.274-14.273c-1.902-1.906-4.093-2.856-6.57-2.856c-2.471,0-4.661,0.95-6.563,2.856L142.466,174.441
                            L30.262,62.241c-1.903-1.906-4.093-2.856-6.567-2.856c-2.475,0-4.665,0.95-6.567,2.856L2.856,76.515C0.95,78.417,0,80.607,0,83.082
                            c0,2.473,0.953,4.663,2.856,6.565l133.043,133.046c1.902,1.903,4.093,2.854,6.567,2.854s4.661-0.951,6.562-2.854L282.082,89.647
                            c1.902-1.903,2.847-4.093,2.847-6.565C284.929,80.607,283.984,78.417,282.082,76.511z" />
                                </g>
                        </svg>
                    </p>
            </div>
        </div>
    </div>
</header>

<section class="account-section">
    <div class="container">
      <div class="content">
        <div class="personal-information">
          <h2 class="personal-information__title">{% trans 'Ваш аккаунт' %}</h2>
          <div class="user">
            <svg class="user__img" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1"
              x="0px" y="0px" viewBox="0 0 55 55" style="enable-background:new 0 0 55 55;" xml:space="preserve" width="512px"
              height="512px">
              <path d="M55,27.5C55,12.337,42.663,0,27.5,0S0,12.337,0,27.5c0,8.009,3.444,15.228,8.926,20.258l-0.026,0.023l0.892,0.752  c0.058,0.049,0.121,0.089,0.179,0.137c0.474,0.393,0.965,0.766,1.465,1.127c0.162,0.117,0.324,0.234,0.489,0.348  c0.534,0.368,1.082,0.717,1.642,1.048c0.122,0.072,0.245,0.142,0.368,0.212c0.613,0.349,1.239,0.678,1.88,0.98  c0.047,0.022,0.095,0.042,0.142,0.064c2.089,0.971,4.319,1.684,6.651,2.105c0.061,0.011,0.122,0.022,0.184,0.033  c0.724,0.125,1.456,0.225,2.197,0.292c0.09,0.008,0.18,0.013,0.271,0.021C25.998,54.961,26.744,55,27.5,55  c0.749,0,1.488-0.039,2.222-0.098c0.093-0.008,0.186-0.013,0.279-0.021c0.735-0.067,1.461-0.164,2.178-0.287  c0.062-0.011,0.125-0.022,0.187-0.034c2.297-0.412,4.495-1.109,6.557-2.055c0.076-0.035,0.153-0.068,0.229-0.104  c0.617-0.29,1.22-0.603,1.811-0.936c0.147-0.083,0.293-0.167,0.439-0.253c0.538-0.317,1.067-0.648,1.581-1  c0.185-0.126,0.366-0.259,0.549-0.391c0.439-0.316,0.87-0.642,1.289-0.983c0.093-0.075,0.193-0.14,0.284-0.217l0.915-0.764  l-0.027-0.023C51.523,42.802,55,35.55,55,27.5z M2,27.5C2,13.439,13.439,2,27.5,2S53,13.439,53,27.5  c0,7.577-3.325,14.389-8.589,19.063c-0.294-0.203-0.59-0.385-0.893-0.537l-8.467-4.233c-0.76-0.38-1.232-1.144-1.232-1.993v-2.957  c0.196-0.242,0.403-0.516,0.617-0.817c1.096-1.548,1.975-3.27,2.616-5.123c1.267-0.602,2.085-1.864,2.085-3.289v-3.545  c0-0.867-0.318-1.708-0.887-2.369v-4.667c0.052-0.52,0.236-3.448-1.883-5.864C34.524,9.065,31.541,8,27.5,8  s-7.024,1.065-8.867,3.168c-2.119,2.416-1.935,5.346-1.883,5.864v4.667c-0.568,0.661-0.887,1.502-0.887,2.369v3.545  c0,1.101,0.494,2.128,1.34,2.821c0.81,3.173,2.477,5.575,3.093,6.389v2.894c0,0.816-0.445,1.566-1.162,1.958l-7.907,4.313  c-0.252,0.137-0.502,0.297-0.752,0.476C5.276,41.792,2,35.022,2,27.5z"
                fill="#1b84c6" />
              <g>
              </g>
            </svg>
            <div class="user__info-wrap">
              <p class="user__name">
              {% if request.user.full_name %}
                {{ request.user.full_name }}
              {% else %}
                {{ request.user.username }}
              {% endif %}
              </p>
              <p class="user__tokens"> {{ tokens_sum|default:"0" }}
                <span>{% trans 'ТОКЕНОВ' %}</span>
              </p>
            </div>
          </div>
          <form action="{% url 'set_settings' %}" name="pers-info-form" class="pers-info-form" method="POST">
            <div class="wrap">
              <label for="address">{% trans 'Адрес:' %}</label>
              <p>
                {{ user_form.address }}
              </p>
            </div>
            <div class="wrap">
              <label for="phone">{% trans 'Номер телефона:' %}</label>
              <p>
                {{ user_form.phone_number }}
              </p>
            </div>
            <div class="wrap">
              <label for="email">{% trans 'Email:' %}</label>
              <p>
                {{ user_form.email }}
                <span class="tooltiptext" id="email_errors"></span>
              </p>
            </div>
            <div class="wrap">
              <label for="old_password">{% trans 'Текущий пароль:' %}</label>
              <p>
                {{ password_form.old_password }}
                <span class="tooltiptext" id="old_password_errors"></span>
              </p>
            </div>
            <div class="wrap">
              <label for="new_password">{% trans 'Новый пароль:' %}</label>
              <p>
                {{ password_form.new_password1 }}
                <span class="tooltiptext" id="new_password1_errors"></span>
              </p>
            </div>
            <div class="wrap">
              <label for="confirm_password">{% trans 'Подтверждение пароля:' %}</label>
              <p>
                {{ password_form.new_password2 }}
                <span class="tooltiptext" id="new_password2_errors"></span>
              </p>
            </div>
            {% csrf_token %}
            <div class="btn-wrap">
                <button type="submit" class="submit">{% trans 'Сохранить' %}</button>
                <span class="tooltiptext" id="profile-tooltip"></span>
            </div>
          </form>
        </div>
        <div class="history">
          <h2 class="history__title">{% trans 'История ваших транзакций' %}</h2>
          <table class="transactions" cellspacing="0">
            <thead>
              <tr class="table-header">
                <td class="transactions__subtitle date">{% trans 'Дата' %}</td>
                <td class="transactions__subtitle method">{% trans 'Метод' %}</td>
                <td class="transactions__subtitle tokensum">{% trans 'Количество токенов' %}</td>
                <td class="transactions__subtitle totalsum">{% trans 'Сумма' %}</td>
              </tr>
            </thead>
            {% for donation in donations %}
              <tr>
                <td class="date">{{ donation.created_dt|date:"d.m.y" }}</td>
                <td class="method">{{ donation.payment_method }}</td>
                <td class="tokensum">{{ donation.tokens|default:"Pending" }}{% if donation.tokens %}<br /><span>ZNAQ</span>{% endif %}</td>
                <td class="totalsum">{{ donation.tx_sum|default:"" }}{% if donation.tx_sum %}<br /><span>{{ donation.payment_method }}</span>{% endif %}</td>
              </tr>
            {% endfor %}
          </table>

          {% if not donations %}
            <p class="text">{% trans 'Еще не было произведено ни одной транзакции' %}</p>
          {% endif %}
        </div>
      </div>
    </div>
</section>

<section class="donation-section" id="make-donation">
    <div class="container">
        <h2 class="donation-section__title">{% trans 'MAKE A DONATION AND GET TOKENS' %}</h2>

        <div class="help">
            <a href="{{ conf3.donation_guide_doc }}" target="_blank">
                <img src="{% static 'img/lk-file.png' %}" width="15px" height="15px">
                <span>{% trans 'Tokens purchase guide' %}</span>
            </a>
            <a href="{{ conf3.donation_guide_video }}" target="_blank">
                <img src="{% static 'img/lk-play.png' %}" width="15px" height="15px">
                <span>{% trans 'Watch video guide' %}</span>
            </a>
        </div>

      <div class="content">
        <form action="{% url 'save_transaction' %}" class="donation-form" method="POST">
          <div class="step step--1">
            <p class="step__title">{% trans 'Choose your payment method' %}</p>
            {% for address in addresses %}
                <input type="radio" class="input-hide" name="donation_address" value="{{ user.profile_wallets|donation_wallet:address.currency }}" data-currency="{{ address.currency }}" id="{{ address.currency }}">
                <label for="{{ address.currency }}" class="payment-label">{% trans 'BUY WITH' %} {{ address.currency }}</label>
            {% endfor %}
          </div>
          <div class="steps-wrap">
            <div class="step step--2 inactive">
              <p class="step__title">{% trans 'Transfer your money to THIS address' %}</p>
              <p class="address-transfer" id="address-transfer">{% trans 'Choose payment method' %}</p>
              <div class="copy-address-transfer" id="copy-address-transfer"><span>{% trans 'Copy address' %}</span></div>
              <label for="e20_wallet" class="label">{% trans 'Your E20 wallet address:' %}</label>
              {{ donation_form.e20_wallet }}
              <span class="tooltiptext" id="e20_wallet_errors"></span>
            </div>
            <div class="step step--3 inactive">
              <p class="step__title">{% trans 'Enter the transaction number you send the ETH' %}</p>
              <label for="e20_wallet" class="label">{% trans 'The transaction number:' %}</label>
              {{ donation_form.tx_id }}
              <span class="tooltiptext" id="tx_id_errors"></span>
              <div>
                <button class="send-btn" type="submit">{% trans 'Send' %}</button>
                <span class="tooltiptext" id="transaction_errors"></span>
              </div>
            </div>
            <input type="hidden" value="" name="payment_method" id="payment_method">
            {% csrf_token %}
          </div>
        </form>
        <div class="calculator-form">
          <p class="title">{% trans 'Калькулятор' %}</p>
          <div class="fields">
            <select name="calculator-currency" id="calculator-currency" class="input">
              <option value="" selected="">{% trans 'Выберите валюту' %}</option>
              {% for address in addresses %}
                <option value="ZNAQ/{{ address.currency }}">{{ address.currency }}</option>
              {% endfor %}
            </select>
            <input type="text" placeholder="{% trans 'Сумма' %}" name="calculator-value" id="calculator-value" class="input">
            <input type="text" placeholder="{% trans 'Количество токенов' %}" name="calculator-tokens" id="calculator-tokens" class="input">
          </div>
          <div class="bottom-fields">
              <p class="discount" data-discount="{{ conf3.discount_rate }}"></p>
              <p class="text">{% trans 'Tokens with discount and bonus' %}</p>
              <p class="total">0</p>
          </div>
        </div>
        <div class="referral">
            <p class="title">
                {% trans 'Your referral' %}
            </p>
            {% if user.referral_codes.all %}
                <p class="ref-subtitle">{% trans 'Your referral link' %}:</p>
                <p class="link" id="reflink">{{ user.referral_codes.all.0.url }}</p>
                <a href="#!" class="copylink" id="copylink"><img src="{% static 'img/copy.png' %}" alt="copy" width="18px"></a>
                <a href="{% url 'referral_profile' %}" class="ref-btn">{% trans 'See your referral progress' %}</a>
            {% else %}
                <form class="referral-form" action="{% url "pinax_referrals:create_referral" %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="redirect_to" id="redirect_to" value="/" />
                    <input type="hidden" name="obj_ct_pk" id="obj_ct_pk" value="" />
                    <input type="hidden" name="obj_pk" id="obj_pk" value="" />

                    <button type="submit" class="create-ref">{% trans 'Create referral link' %}</button>
                </form>
            {% endif %}
        </div>
      </div>
    </div>
</section>

{% endblock %}

{% block footer_class %}class="footer footer--lk"{% endblock %}

{% block extrajs %}

{% endblock extrajs %}